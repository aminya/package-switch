"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const atom_space_pen_views_1 = require("atom-space-pen-views");
class InitFileView extends atom_space_pen_views_1.View {
    static content() {
        this.div({ class: "package-switch", tabindex: -1 }, () => {
            this.div({ class: "inset-panel" }, () => {
                this.div({ class: "panel-heading icon icon-book" }, () => {
                    this.span({ outlet: "name" });
                    this.span({ class: "inline-block btn-group" }, () => {
                        this.button({ class: "btn btn-xs" }, "Execute");
                        this.button({ class: "opposite btn btn-xs" }, "Execute Opposite");
                    });
                });
                this.div({ class: "panel-body padded" }, () => {
                    this.div({ class: "package-list", outlet: "package_list" });
                });
            });
        });
    }
    initialize({ uri, file }) {
        this.uri = uri;
        this.file = file;
        this.find(".btn").on("click", ({ currentTarget }) => {
            this.save();
            this.file.execute(currentTarget.classList.contains("opposite"));
        });
        this.updateContent();
    }
    destroy() {
        this.save();
    }
    getURI() {
        return this.uri;
    }
    getTitle() {
        return "Package Switch Settings";
    }
    getIconName() {
        return "tools";
    }
    updateContent() {
        let p;
        this.name.text(this.file.name);
        const obj = {};
        for (p of this.file.packages) {
            obj[p.name] = p.action;
        }
        for (p of atom.packages.getAvailablePackageNames()) {
            if (obj[p] != null) {
                continue;
            }
            obj[p] = "ignored";
        }
        const arr = [];
        for (const k of Object.keys(obj)) {
            arr.push({ name: k, action: obj[k] });
        }
        this.package_list.text("");
        arr.map((o) => this.addPackage(o));
    }
    addPackage({ name, action }) {
        const item = atom_space_pen_views_1.$$(function () {
            this.div({ class: "package" }, () => {
                this.div({ class: `item icon icon-diff-${action}` }, name);
            });
        });
        item.on("click", function ({ currentTarget }) {
            const e = currentTarget.children[0];
            if (e.classList.contains("icon-diff-added")) {
                e.classList.remove("icon-diff-added");
                e.classList.add("icon-diff-removed");
            }
            else if (e.classList.contains("icon-diff-ignored")) {
                e.classList.remove("icon-diff-ignored");
                e.classList.add("icon-diff-added");
            }
            else {
                e.classList.remove("icon-diff-removed");
                e.classList.add("icon-diff-ignored");
            }
        });
        this.package_list.append(item);
    }
    save() {
        this.file.packages = [];
        const package_list_children = Array.from(this.package_list.children());
        for (const child of package_list_children) {
            if (child.children[0].classList.contains("icon-diff-added")) {
                this.file.packages.push({ name: child.children[0].innerText, action: "added" });
            }
            if (child.children[0].classList.contains("icon-diff-removed")) {
                this.file.packages.push({ name: child.children[0].innerText, action: "removed" });
            }
        }
        this.file.save();
    }
}
exports.InitFileView = InitFileView;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5pdC1maWxlLXZpZXcuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaW5pdC1maWxlLXZpZXcudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFLQSwrREFBK0M7QUFFL0MsTUFBYSxZQUFhLFNBQVEsMkJBQUk7SUFDcEMsTUFBTSxDQUFDLE9BQU87UUFDWixJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsS0FBSyxFQUFFLGdCQUFnQixFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsRUFBRTtZQUN2RCxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsS0FBSyxFQUFFLGFBQWEsRUFBRSxFQUFFLEdBQUcsRUFBRTtnQkFDdEMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEtBQUssRUFBRSw4QkFBOEIsRUFBRSxFQUFFLEdBQUcsRUFBRTtvQkFDdkQsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFBO29CQUM3QixJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsS0FBSyxFQUFFLHdCQUF3QixFQUFFLEVBQUUsR0FBRyxFQUFFO3dCQUNsRCxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRSxFQUFFLFNBQVMsQ0FBQyxDQUFBO3dCQUMvQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsS0FBSyxFQUFFLHFCQUFxQixFQUFFLEVBQUUsa0JBQWtCLENBQUMsQ0FBQTtvQkFDbkUsQ0FBQyxDQUFDLENBQUE7Z0JBQ0osQ0FBQyxDQUFDLENBQUE7Z0JBQ0YsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEtBQUssRUFBRSxtQkFBbUIsRUFBRSxFQUFFLEdBQUcsRUFBRTtvQkFDNUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEtBQUssRUFBRSxjQUFjLEVBQUUsTUFBTSxFQUFFLGNBQWMsRUFBRSxDQUFDLENBQUE7Z0JBQzdELENBQUMsQ0FBQyxDQUFBO1lBQ0osQ0FBQyxDQUFDLENBQUE7UUFDSixDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUM7SUFFRCxVQUFVLENBQUMsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFO1FBQ3RCLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFBO1FBQ2QsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUE7UUFDaEIsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxhQUFhLEVBQUUsRUFBRSxFQUFFO1lBQ2xELElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQTtZQUNYLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUE7UUFDakUsQ0FBQyxDQUFDLENBQUE7UUFDRixJQUFJLENBQUMsYUFBYSxFQUFFLENBQUE7SUFDdEIsQ0FBQztJQUVELE9BQU87UUFDTCxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUE7SUFDYixDQUFDO0lBRUQsTUFBTTtRQUNKLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQTtJQUNqQixDQUFDO0lBRUQsUUFBUTtRQUNOLE9BQU8seUJBQXlCLENBQUE7SUFDbEMsQ0FBQztJQUVELFdBQVc7UUFDVCxPQUFPLE9BQU8sQ0FBQTtJQUNoQixDQUFDO0lBRUQsYUFBYTtRQUNYLElBQUksQ0FBQyxDQUFBO1FBQ0wsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUM5QixNQUFNLEdBQUcsR0FBRyxFQUFFLENBQUE7UUFDZCxLQUFLLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRTtZQUM1QixHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUE7U0FDdkI7UUFFRCxLQUFLLENBQUMsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLHdCQUF3QixFQUFFLEVBQUU7WUFDbEQsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxFQUFFO2dCQUNsQixTQUFRO2FBQ1Q7WUFDRCxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFBO1NBQ25CO1FBRUQsTUFBTSxHQUFHLEdBQUcsRUFBRSxDQUFBO1FBQ2QsS0FBSyxNQUFNLENBQUMsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFO1lBQ2hDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFBO1NBQ3RDO1FBRUQsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUE7UUFDMUIsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBQ3BDLENBQUM7SUFFRCxVQUFVLENBQUMsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFO1FBQ3pCLE1BQU0sSUFBSSxHQUFHLHlCQUFFLENBQUM7WUFDZCxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxFQUFFLEdBQUcsRUFBRTtnQkFDbEMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEtBQUssRUFBRSx1QkFBdUIsTUFBTSxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQTtZQUM1RCxDQUFDLENBQUMsQ0FBQTtRQUNKLENBQUMsQ0FBQyxDQUFBO1FBRUYsSUFBSSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsVUFBVSxFQUFFLGFBQWEsRUFBRTtZQUMxQyxNQUFNLENBQUMsR0FBRyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFBO1lBQ25DLElBQUksQ0FBQyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsaUJBQWlCLENBQUMsRUFBRTtnQkFDM0MsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsaUJBQWlCLENBQUMsQ0FBQTtnQkFDckMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsbUJBQW1CLENBQUMsQ0FBQTthQUNyQztpQkFBTSxJQUFJLENBQUMsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLG1CQUFtQixDQUFDLEVBQUU7Z0JBQ3BELENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLG1CQUFtQixDQUFDLENBQUE7Z0JBQ3ZDLENBQUMsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLENBQUE7YUFDbkM7aUJBQU07Z0JBQ0wsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsbUJBQW1CLENBQUMsQ0FBQTtnQkFDdkMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsbUJBQW1CLENBQUMsQ0FBQTthQUNyQztRQUNILENBQUMsQ0FBQyxDQUFBO1FBRUYsSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUE7SUFDaEMsQ0FBQztJQUVELElBQUk7UUFDRixJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUE7UUFDdkIsTUFBTSxxQkFBcUIsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQTtRQUN0RSxLQUFLLE1BQU0sS0FBSyxJQUFJLHFCQUFxQixFQUFFO1lBQ3pDLElBQUksS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLGlCQUFpQixDQUFDLEVBQUU7Z0JBQzNELElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksRUFBRSxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQTthQUNoRjtZQUNELElBQUksS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLG1CQUFtQixDQUFDLEVBQUU7Z0JBQzdELElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksRUFBRSxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQTthQUNsRjtTQUNGO1FBQ0QsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQTtJQUNsQixDQUFDO0NBQ0Y7QUF6R0Qsb0NBeUdDIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIGRlY2FmZmVpbmF0ZSBzdWdnZXN0aW9uczpcbiAqIERTMjA3OiBDb25zaWRlciBzaG9ydGVyIHZhcmlhdGlvbnMgb2YgbnVsbCBjaGVja3NcbiAqIEZ1bGwgZG9jczogaHR0cHM6Ly9naXRodWIuY29tL2RlY2FmZmVpbmF0ZS9kZWNhZmZlaW5hdGUvYmxvYi9tYXN0ZXIvZG9jcy9zdWdnZXN0aW9ucy5tZFxuICovXG5pbXBvcnQgeyAkJCwgVmlldyB9IGZyb20gXCJhdG9tLXNwYWNlLXBlbi12aWV3c1wiXG5cbmV4cG9ydCBjbGFzcyBJbml0RmlsZVZpZXcgZXh0ZW5kcyBWaWV3IHtcbiAgc3RhdGljIGNvbnRlbnQoKSB7XG4gICAgdGhpcy5kaXYoeyBjbGFzczogXCJwYWNrYWdlLXN3aXRjaFwiLCB0YWJpbmRleDogLTEgfSwgKCkgPT4ge1xuICAgICAgdGhpcy5kaXYoeyBjbGFzczogXCJpbnNldC1wYW5lbFwiIH0sICgpID0+IHtcbiAgICAgICAgdGhpcy5kaXYoeyBjbGFzczogXCJwYW5lbC1oZWFkaW5nIGljb24gaWNvbi1ib29rXCIgfSwgKCkgPT4ge1xuICAgICAgICAgIHRoaXMuc3Bhbih7IG91dGxldDogXCJuYW1lXCIgfSlcbiAgICAgICAgICB0aGlzLnNwYW4oeyBjbGFzczogXCJpbmxpbmUtYmxvY2sgYnRuLWdyb3VwXCIgfSwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5idXR0b24oeyBjbGFzczogXCJidG4gYnRuLXhzXCIgfSwgXCJFeGVjdXRlXCIpXG4gICAgICAgICAgICB0aGlzLmJ1dHRvbih7IGNsYXNzOiBcIm9wcG9zaXRlIGJ0biBidG4teHNcIiB9LCBcIkV4ZWN1dGUgT3Bwb3NpdGVcIilcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICB0aGlzLmRpdih7IGNsYXNzOiBcInBhbmVsLWJvZHkgcGFkZGVkXCIgfSwgKCkgPT4ge1xuICAgICAgICAgIHRoaXMuZGl2KHsgY2xhc3M6IFwicGFja2FnZS1saXN0XCIsIG91dGxldDogXCJwYWNrYWdlX2xpc3RcIiB9KVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgaW5pdGlhbGl6ZSh7IHVyaSwgZmlsZSB9KSB7XG4gICAgdGhpcy51cmkgPSB1cmlcbiAgICB0aGlzLmZpbGUgPSBmaWxlXG4gICAgdGhpcy5maW5kKFwiLmJ0blwiKS5vbihcImNsaWNrXCIsICh7IGN1cnJlbnRUYXJnZXQgfSkgPT4ge1xuICAgICAgdGhpcy5zYXZlKClcbiAgICAgIHRoaXMuZmlsZS5leGVjdXRlKGN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwib3Bwb3NpdGVcIikpXG4gICAgfSlcbiAgICB0aGlzLnVwZGF0ZUNvbnRlbnQoKVxuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnNhdmUoKVxuICB9XG5cbiAgZ2V0VVJJKCkge1xuICAgIHJldHVybiB0aGlzLnVyaVxuICB9XG5cbiAgZ2V0VGl0bGUoKSB7XG4gICAgcmV0dXJuIFwiUGFja2FnZSBTd2l0Y2ggU2V0dGluZ3NcIlxuICB9XG5cbiAgZ2V0SWNvbk5hbWUoKSB7XG4gICAgcmV0dXJuIFwidG9vbHNcIlxuICB9XG5cbiAgdXBkYXRlQ29udGVudCgpIHtcbiAgICBsZXQgcFxuICAgIHRoaXMubmFtZS50ZXh0KHRoaXMuZmlsZS5uYW1lKVxuICAgIGNvbnN0IG9iaiA9IHt9XG4gICAgZm9yIChwIG9mIHRoaXMuZmlsZS5wYWNrYWdlcykge1xuICAgICAgb2JqW3AubmFtZV0gPSBwLmFjdGlvblxuICAgIH1cblxuICAgIGZvciAocCBvZiBhdG9tLnBhY2thZ2VzLmdldEF2YWlsYWJsZVBhY2thZ2VOYW1lcygpKSB7XG4gICAgICBpZiAob2JqW3BdICE9IG51bGwpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cbiAgICAgIG9ialtwXSA9IFwiaWdub3JlZFwiXG4gICAgfVxuXG4gICAgY29uc3QgYXJyID0gW11cbiAgICBmb3IgKGNvbnN0IGsgb2YgT2JqZWN0LmtleXMob2JqKSkge1xuICAgICAgYXJyLnB1c2goeyBuYW1lOiBrLCBhY3Rpb246IG9ialtrXSB9KVxuICAgIH1cblxuICAgIHRoaXMucGFja2FnZV9saXN0LnRleHQoXCJcIilcbiAgICBhcnIubWFwKChvKSA9PiB0aGlzLmFkZFBhY2thZ2UobykpXG4gIH1cblxuICBhZGRQYWNrYWdlKHsgbmFtZSwgYWN0aW9uIH0pIHtcbiAgICBjb25zdCBpdGVtID0gJCQoZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5kaXYoeyBjbGFzczogXCJwYWNrYWdlXCIgfSwgKCkgPT4ge1xuICAgICAgICB0aGlzLmRpdih7IGNsYXNzOiBgaXRlbSBpY29uIGljb24tZGlmZi0ke2FjdGlvbn1gIH0sIG5hbWUpXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBpdGVtLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKHsgY3VycmVudFRhcmdldCB9KSB7XG4gICAgICBjb25zdCBlID0gY3VycmVudFRhcmdldC5jaGlsZHJlblswXVxuICAgICAgaWYgKGUuY2xhc3NMaXN0LmNvbnRhaW5zKFwiaWNvbi1kaWZmLWFkZGVkXCIpKSB7XG4gICAgICAgIGUuY2xhc3NMaXN0LnJlbW92ZShcImljb24tZGlmZi1hZGRlZFwiKVxuICAgICAgICBlLmNsYXNzTGlzdC5hZGQoXCJpY29uLWRpZmYtcmVtb3ZlZFwiKVxuICAgICAgfSBlbHNlIGlmIChlLmNsYXNzTGlzdC5jb250YWlucyhcImljb24tZGlmZi1pZ25vcmVkXCIpKSB7XG4gICAgICAgIGUuY2xhc3NMaXN0LnJlbW92ZShcImljb24tZGlmZi1pZ25vcmVkXCIpXG4gICAgICAgIGUuY2xhc3NMaXN0LmFkZChcImljb24tZGlmZi1hZGRlZFwiKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZS5jbGFzc0xpc3QucmVtb3ZlKFwiaWNvbi1kaWZmLXJlbW92ZWRcIilcbiAgICAgICAgZS5jbGFzc0xpc3QuYWRkKFwiaWNvbi1kaWZmLWlnbm9yZWRcIilcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgdGhpcy5wYWNrYWdlX2xpc3QuYXBwZW5kKGl0ZW0pXG4gIH1cblxuICBzYXZlKCkge1xuICAgIHRoaXMuZmlsZS5wYWNrYWdlcyA9IFtdXG4gICAgY29uc3QgcGFja2FnZV9saXN0X2NoaWxkcmVuID0gQXJyYXkuZnJvbSh0aGlzLnBhY2thZ2VfbGlzdC5jaGlsZHJlbigpKVxuICAgIGZvciAoY29uc3QgY2hpbGQgb2YgcGFja2FnZV9saXN0X2NoaWxkcmVuKSB7XG4gICAgICBpZiAoY2hpbGQuY2hpbGRyZW5bMF0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiaWNvbi1kaWZmLWFkZGVkXCIpKSB7XG4gICAgICAgIHRoaXMuZmlsZS5wYWNrYWdlcy5wdXNoKHsgbmFtZTogY2hpbGQuY2hpbGRyZW5bMF0uaW5uZXJUZXh0LCBhY3Rpb246IFwiYWRkZWRcIiB9KVxuICAgICAgfVxuICAgICAgaWYgKGNoaWxkLmNoaWxkcmVuWzBdLmNsYXNzTGlzdC5jb250YWlucyhcImljb24tZGlmZi1yZW1vdmVkXCIpKSB7XG4gICAgICAgIHRoaXMuZmlsZS5wYWNrYWdlcy5wdXNoKHsgbmFtZTogY2hpbGQuY2hpbGRyZW5bMF0uaW5uZXJUZXh0LCBhY3Rpb246IFwicmVtb3ZlZFwiIH0pXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuZmlsZS5zYXZlKClcbiAgfVxufVxuIl19