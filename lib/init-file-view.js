"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const atom_space_pen_views_1 = require("atom-space-pen-views");
class InitFileView extends atom_space_pen_views_1.View {
    static content() {
        this.div({ class: "package-switch", tabindex: -1 }, () => {
            this.div({ class: "inset-panel" }, () => {
                this.div({ class: "panel-heading icon icon-book" }, () => {
                    this.span({ outlet: "name" });
                    this.span({ class: "inline-block btn-group" }, () => {
                        this.button({ class: "btn btn-xs" }, "Execute");
                        this.button({ class: "opposite btn btn-xs" }, "Execute Opposite");
                    });
                });
                this.div({ class: "panel-body padded" }, () => {
                    this.div({ class: "package-list", outlet: "package_list" });
                });
            });
        });
    }
    initialize({ uri, file }) {
        this.uri = uri;
        this.file = file;
        this.find(".btn").on("click", ({ currentTarget }) => {
            this.save();
            this.file.execute(currentTarget.classList.contains("opposite"));
        });
        this.updateContent();
    }
    destroy() {
        this.save();
    }
    getURI() {
        return this.uri;
    }
    getTitle() {
        return "Package Switch Settings";
    }
    getIconName() {
        return "tools";
    }
    updateContent() {
        let p;
        this.name.text(this.file.name);
        const obj = {};
        for (p of this.file.packages) {
            obj[p.name] = p.action;
        }
        for (p of atom.packages.getAvailablePackageNames()) {
            if (obj[p] != null) {
                continue;
            }
            obj[p] = "ignored";
        }
        const arr = [];
        for (const k of Object.keys(obj)) {
            arr.push({ name: k, action: obj[k] });
        }
        this.package_list.text("");
        arr.map((o) => this.addPackage(o));
    }
    addPackage({ name, action }) {
        const item = atom_space_pen_views_1.$$(function () {
            this.div({ class: "package" }, () => {
                this.div({ class: `item icon icon-diff-${action}` }, name);
            });
        });
        item.on("click", function ({ currentTarget }) {
            const e = currentTarget.children[0];
            if (e.classList.contains("icon-diff-added")) {
                e.classList.remove("icon-diff-added");
                e.classList.add("icon-diff-removed");
            }
            else if (e.classList.contains("icon-diff-ignored")) {
                e.classList.remove("icon-diff-ignored");
                e.classList.add("icon-diff-added");
            }
            else {
                e.classList.remove("icon-diff-removed");
                e.classList.add("icon-diff-ignored");
            }
        });
        this.package_list.append(item);
    }
    save() {
        this.file.packages = [];
        const package_list_children = Array.from(this.package_list.children());
        for (const child of package_list_children) {
            if (child.children[0].classList.contains("icon-diff-added")) {
                this.file.packages.push({ name: child.children[0].innerText, action: "added" });
            }
            if (child.children[0].classList.contains("icon-diff-removed")) {
                this.file.packages.push({ name: child.children[0].innerText, action: "removed" });
            }
        }
        this.file.save();
    }
}
exports.InitFileView = InitFileView;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5pdC1maWxlLXZpZXcuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaW5pdC1maWxlLXZpZXcudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFLQSwrREFBK0M7QUFFL0MsTUFBYSxZQUFhLFNBQVEsMkJBQUk7SUFDcEMsTUFBTSxDQUFDLE9BQU87UUFDWixJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsS0FBSyxFQUFFLGdCQUFnQixFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsRUFBRTtZQUN2RCxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsS0FBSyxFQUFFLGFBQWEsRUFBRSxFQUFFLEdBQUcsRUFBRTtnQkFDdEMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEtBQUssRUFBRSw4QkFBOEIsRUFBRSxFQUFFLEdBQUcsRUFBRTtvQkFDdkQsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFBO29CQUM3QixJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsS0FBSyxFQUFFLHdCQUF3QixFQUFFLEVBQUUsR0FBRyxFQUFFO3dCQUNsRCxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRSxFQUFFLFNBQVMsQ0FBQyxDQUFBO3dCQUMvQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsS0FBSyxFQUFFLHFCQUFxQixFQUFFLEVBQUUsa0JBQWtCLENBQUMsQ0FBQTtvQkFDbkUsQ0FBQyxDQUFDLENBQUE7Z0JBQ0osQ0FBQyxDQUFDLENBQUE7Z0JBQ0YsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEtBQUssRUFBRSxtQkFBbUIsRUFBRSxFQUFFLEdBQUcsRUFBRTtvQkFDNUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEtBQUssRUFBRSxjQUFjLEVBQUUsTUFBTSxFQUFFLGNBQWMsRUFBRSxDQUFDLENBQUE7Z0JBQzdELENBQUMsQ0FBQyxDQUFB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QUksS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLG1CQUFtQixDQUFDLEVBQUU7Z0JBQzdELElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksRUFBRSxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQTthQUNsRjtTQUNGO1FBQ0QsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQTtJQUNsQixDQUFDO0NBQ0Y7QUF6R0Qsb0NBeUdDIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuICogZGVjYWZmZWluYXRlIHN1Z2dlc3Rpb25zOlxyXG4gKiBEUzIwNzogQ29uc2lkZXIgc2hvcnRlciB2YXJpYXRpb25zIG9mIG51bGwgY2hlY2tzXHJcbiAqIEZ1bGwgZG9jczogaHR0cHM6Ly9naXRodWIuY29tL2RlY2FmZmVpbmF0ZS9kZWNhZmZlaW5hdGUvYmxvYi9tYXN0ZXIvZG9jcy9zdWdnZXN0aW9ucy5tZFxyXG4gKi9cclxuaW1wb3J0IHsgJCQsIFZpZXcgfSBmcm9tIFwiYXRvbS1zcGFjZS1wZW4tdmlld3NcIlxyXG5cclxuZXhwb3J0IGNsYXNzIEluaXRGaWxlVmlldyBleHRlbmRzIFZpZXcge1xyXG4gIHN0YXRpYyBjb250ZW50KCkge1xyXG4gICAgdGhpcy5kaXYoeyBjbGFzczogXCJwYWNrYWdlLXN3aXRjaFwiLCB0YWJpbmRleDogLTEgfSwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmRpdih7IGNsYXNzOiBcImluc2V0LXBhbmVsXCIgfSwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZGl2KHsgY2xhc3M6IFwicGFuZWwtaGVhZGluZyBpY29uIGljb24tYm9va1wiIH0sICgpID0+IHtcclxuICAgICAgICAgIHRoaXMuc3Bhbih7IG91dGxldDogXCJuYW1lXCIgfSlcclxuICAgICAgICAgIHRoaXMuc3Bhbih7IGNsYXNzOiBcImlubGluZS1ibG9jayBidG4tZ3JvdXBcIiB9LCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uKHsgY2xhc3M6IFwiYnRuIGJ0bi14c1wiIH0sIFwiRXhlY3V0ZVwiKVxyXG4gICAgICAgICAgICB0aGlzLmJ1dHRvbih7IGNsYXNzOiBcIm9wcG9zaXRlIGJ0biBidG4teHNcIiB9LCBcIkV4ZWN1dGUgT3Bwb3NpdGVcIilcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgICB0aGlzLmRpdih7IGNsYXNzOiBcInBhbmVsLWJvZHkgcGFkZGVkXCIgfSwgKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5kaXYoeyBjbGFzczogXCJwYWNrYWdlLWxpc3RcIiwgb3V0bGV0OiBcInBhY2thZ2VfbGlzdFwiIH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBpbml0aWFsaXplKHsgdXJpLCBmaWxlIH0pIHtcclxuICAgIHRoaXMudXJpID0gdXJpXHJcbiAgICB0aGlzLmZpbGUgPSBmaWxlXHJcbiAgICB0aGlzLmZpbmQoXCIuYnRuXCIpLm9uKFwiY2xpY2tcIiwgKHsgY3VycmVudFRhcmdldCB9KSA9PiB7XHJcbiAgICAgIHRoaXMuc2F2ZSgpXHJcbiAgICAgIHRoaXMuZmlsZS5leGVjdXRlKGN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwib3Bwb3NpdGVcIikpXHJcbiAgICB9KVxyXG4gICAgdGhpcy51cGRhdGVDb250ZW50KClcclxuICB9XHJcblxyXG4gIGRlc3Ryb3koKSB7XHJcbiAgICB0aGlzLnNhdmUoKVxyXG4gIH1cclxuXHJcbiAgZ2V0VVJJKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudXJpXHJcbiAgfVxyXG5cclxuICBnZXRUaXRsZSgpIHtcclxuICAgIHJldHVybiBcIlBhY2thZ2UgU3dpdGNoIFNldHRpbmdzXCJcclxuICB9XHJcblxyXG4gIGdldEljb25OYW1lKCkge1xyXG4gICAgcmV0dXJuIFwidG9vbHNcIlxyXG4gIH1cclxuXHJcbiAgdXBkYXRlQ29udGVudCgpIHtcclxuICAgIGxldCBwXHJcbiAgICB0aGlzLm5hbWUudGV4dCh0aGlzLmZpbGUubmFtZSlcclxuICAgIGNvbnN0IG9iaiA9IHt9XHJcbiAgICBmb3IgKHAgb2YgdGhpcy5maWxlLnBhY2thZ2VzKSB7XHJcbiAgICAgIG9ialtwLm5hbWVdID0gcC5hY3Rpb25cclxuICAgIH1cclxuXHJcbiAgICBmb3IgKHAgb2YgYXRvbS5wYWNrYWdlcy5nZXRBdmFpbGFibGVQYWNrYWdlTmFtZXMoKSkge1xyXG4gICAgICBpZiAob2JqW3BdICE9IG51bGwpIHtcclxuICAgICAgICBjb250aW51ZVxyXG4gICAgICB9XHJcbiAgICAgIG9ialtwXSA9IFwiaWdub3JlZFwiXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYXJyID0gW11cclxuICAgIGZvciAoY29uc3QgayBvZiBPYmplY3Qua2V5cyhvYmopKSB7XHJcbiAgICAgIGFyci5wdXNoKHsgbmFtZTogaywgYWN0aW9uOiBvYmpba10gfSlcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnBhY2thZ2VfbGlzdC50ZXh0KFwiXCIpXHJcbiAgICBhcnIubWFwKChvKSA9PiB0aGlzLmFkZFBhY2thZ2UobykpXHJcbiAgfVxyXG5cclxuICBhZGRQYWNrYWdlKHsgbmFtZSwgYWN0aW9uIH0pIHtcclxuICAgIGNvbnN0IGl0ZW0gPSAkJChmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHRoaXMuZGl2KHsgY2xhc3M6IFwicGFja2FnZVwiIH0sICgpID0+IHtcclxuICAgICAgICB0aGlzLmRpdih7IGNsYXNzOiBgaXRlbSBpY29uIGljb24tZGlmZi0ke2FjdGlvbn1gIH0sIG5hbWUpXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxuICAgIGl0ZW0ub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoeyBjdXJyZW50VGFyZ2V0IH0pIHtcclxuICAgICAgY29uc3QgZSA9IGN1cnJlbnRUYXJnZXQuY2hpbGRyZW5bMF1cclxuICAgICAgaWYgKGUuY2xhc3NMaXN0LmNvbnRhaW5zKFwiaWNvbi1kaWZmLWFkZGVkXCIpKSB7XHJcbiAgICAgICAgZS5jbGFzc0xpc3QucmVtb3ZlKFwiaWNvbi1kaWZmLWFkZGVkXCIpXHJcbiAgICAgICAgZS5jbGFzc0xpc3QuYWRkKFwiaWNvbi1kaWZmLXJlbW92ZWRcIilcclxuICAgICAgfSBlbHNlIGlmIChlLmNsYXNzTGlzdC5jb250YWlucyhcImljb24tZGlmZi1pZ25vcmVkXCIpKSB7XHJcbiAgICAgICAgZS5jbGFzc0xpc3QucmVtb3ZlKFwiaWNvbi1kaWZmLWlnbm9yZWRcIilcclxuICAgICAgICBlLmNsYXNzTGlzdC5hZGQoXCJpY29uLWRpZmYtYWRkZWRcIilcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBlLmNsYXNzTGlzdC5yZW1vdmUoXCJpY29uLWRpZmYtcmVtb3ZlZFwiKVxyXG4gICAgICAgIGUuY2xhc3NMaXN0LmFkZChcImljb24tZGlmZi1pZ25vcmVkXCIpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5wYWNrYWdlX2xpc3QuYXBwZW5kKGl0ZW0pXHJcbiAgfVxyXG5cclxuICBzYXZlKCkge1xyXG4gICAgdGhpcy5maWxlLnBhY2thZ2VzID0gW11cclxuICAgIGNvbnN0IHBhY2thZ2VfbGlzdF9jaGlsZHJlbiA9IEFycmF5LmZyb20odGhpcy5wYWNrYWdlX2xpc3QuY2hpbGRyZW4oKSlcclxuICAgIGZvciAoY29uc3QgY2hpbGQgb2YgcGFja2FnZV9saXN0X2NoaWxkcmVuKSB7XHJcbiAgICAgIGlmIChjaGlsZC5jaGlsZHJlblswXS5jbGFzc0xpc3QuY29udGFpbnMoXCJpY29uLWRpZmYtYWRkZWRcIikpIHtcclxuICAgICAgICB0aGlzLmZpbGUucGFja2FnZXMucHVzaCh7IG5hbWU6IGNoaWxkLmNoaWxkcmVuWzBdLmlubmVyVGV4dCwgYWN0aW9uOiBcImFkZGVkXCIgfSlcclxuICAgICAgfVxyXG4gICAgICBpZiAoY2hpbGQuY2hpbGRyZW5bMF0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiaWNvbi1kaWZmLXJlbW92ZWRcIikpIHtcclxuICAgICAgICB0aGlzLmZpbGUucGFja2FnZXMucHVzaCh7IG5hbWU6IGNoaWxkLmNoaWxkcmVuWzBdLmlubmVyVGV4dCwgYWN0aW9uOiBcInJlbW92ZWRcIiB9KVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLmZpbGUuc2F2ZSgpXHJcbiAgfVxyXG59XHJcbiJdfQ==